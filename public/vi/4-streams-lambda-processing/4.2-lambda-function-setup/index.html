<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/favicon.png" type="image/png">

    <title>4.2 Lambda Function Setup :: Tạo mới tài khoản AWS</title>

    
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/nucleus.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/fontawesome-all.min.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/hybrid.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/featherlight.min.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/perfect-scrollbar.min.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/auto-complete.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/atom-one-dark-reasonable.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/theme.css?1755112296" rel="stylesheet">
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/hugo-theme.css?1755112296" rel="stylesheet">
    
    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/css/theme-workshop.css?1755112296" rel="stylesheet">
    
    

    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/jquery-3.3.1.min.js?1755112296"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.2-lambda-function-setup/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/lunr.min.js?1755112296"></script>
<script type="text/javascript" src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/auto-complete.js?1755112296"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/crimsondd.github.io\/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams\/\/vi";
    
</script>
<script type="text/javascript" src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/search.js?1755112296"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/" title="1. Thiết lập &amp; Triển khai Hạ tầng" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/">
           <b> 1. </b> 1. Thiết lập &amp; Triển khai Hạ tầng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.1-aws-freetier-overview/" title="1.1 Tổng quan AWS Free Tier" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.1-aws-freetier-overview/">
           <b> 1.1 </b> 1.1 Tổng quan AWS Free Tier
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.2-architecture-overview/" title="1.2 Tổng quan Kiến trúc" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.2-architecture-overview/">
           <b> 1.2 </b> 1.2 Tổng quan Kiến trúc
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.3-cloudformation-deployment/" title="1.3 Triển khai CloudFormation" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.3-cloudformation-deployment/">
           <b> 1.3 </b> 1.3 Triển khai CloudFormation
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.4-infrastructure-verification/" title="1.4 Xác minh Hạ tầng" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/1-setup-infrastructure/1.4-infrastructure-verification/">
           <b> 1.4 </b> 1.4 Xác minh Hạ tầng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/" title="2. Triển khai Single Table Design" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/">
           <b> 2. </b> 2. Triển khai Single Table Design
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.1-design-principles/" title="2.1 Nguyên tắc Thiết kế" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.1-design-principles/">
           <b> 2.1 </b> 2.1 Nguyên tắc Thiết kế
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.2-console-navigation/" title="2.2 Điều hướng Console" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.2-console-navigation/">
           <b> 2.2 </b> 2.2 Điều hướng Console
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.3-create-data-items/" title="2.3 Tạo Data Items" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.3-create-data-items/">
           <b> 2.3 </b> 2.3 Tạo Data Items
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.4-query-patterns/" title="2.4 Các Mẫu Truy Vấn" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/2-single-table-design/2.4-query-patterns/">
           <b> 2.4 </b> 2.4 Các Mẫu Truy Vấn
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/" title="3. Global Tables Multi-Region Setup" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/">
           <b> 3. </b> 3. Global Tables Multi-Region Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.1-global-tables-overview/" title="3.1 Tổng quan Global Tables" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.1-global-tables-overview/">
           <b> 3.1 </b> 3.1 Tổng quan Global Tables
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.2-verify-global-setup/" title="3.2 Xác minh Global Setup" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.2-verify-global-setup/">
           <b> 3.2 </b> 3.2 Xác minh Global Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.3-multi-region-operations/" title="3.3 Hoạt động Đa Vùng" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/3-global-tables-setup/3.3-multi-region-operations/">
           <b> 3.3 </b> 3.3 Hoạt động Đa Vùng
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/" title="4. Streams &amp; Lambda Processing" class="dd-item 
        parent
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/">
           <b> 4. </b> 4. Streams &amp; Lambda Processing
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.1-stream-configuration/" title="4.1 Stream Configuration" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.1-stream-configuration/">
           <b> 4.1 </b> 4.1 Stream Configuration
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.2-lambda-function-setup/" title="4.2 Lambda Function Setup" class="dd-item 
        parent
        active
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.2-lambda-function-setup/">
           <b> 4.2 </b> 4.2 Lambda Function Setup
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/" title="5. Giám Sát &amp; Tối Ưu Hóa" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/">
           <b> 5. </b> 5. Giám Sát &amp; Tối Ưu Hóa
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/5.1-cloudwatch-dashboards/" title="5.1 Giám sát cơ bản với CloudWatch" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/5.1-cloudwatch-dashboards/">
           <b> 5.1 </b> 5.1 Giám sát cơ bản với CloudWatch
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/5.2-cost-analysis-optimization/" title="5.2 Phân Tích Chi Phí &amp; Tối Ưu Hóa" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/5.2-cost-analysis-optimization/">
           <b> 5.2 </b> 5.2 Phân Tích Chi Phí &amp; Tối Ưu Hóa
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/" title="6. Các Mẫu Nâng Cao" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/">
           <b> 6. </b> 6. Các Mẫu Nâng Cao
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/6.1-batch-operations/" title="6.1 Thao Tác Hàng Loạt" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/6.1-batch-operations/">
           <b> 6.1 </b> 6.1 Thao Tác Hàng Loạt
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/6.2-conditional-updates/" title="6.2 Cập Nhật Có Điều Kiện" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/6-advanced-patterns/6.2-conditional-updates/">
           <b> 6.2 </b> 6.2 Cập Nhật Có Điều Kiện
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/7-cleanup-resources/" title="7. Dọn dẹp Tài nguyên" class="dd-item 
        
        
        
        ">
      <a href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/7-cleanup-resources/">
           <b> 7. </b> 7. Dọn dẹp Tài nguyên
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="http://awsstudygroup.com"><i class='fab fa-aws'></i> AWS Study Group - Blog</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj"><i class='fab fa-facebook'></i> AWS Study Group - Nhóm FB</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="https://crimsondd.github.io/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/4-streams-lambda-processing/4.2-lambda-function-setup/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="https://crimsondd.github.io/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.2-lambda-function-setup/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830891&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>26-11-2023</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i>
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng</a>
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/'>Workshop DynamoDB Advanced Patterns</a> > <a href='/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/'>4. Streams & Lambda Processing</a> > 4.2 Lambda Function Setup
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#tạo-lambda-xử-lý-stream">Tạo Lambda Xử Lý Stream</a>
      <ul>
        <li><a href="#tổng-quan">Tổng quan</a></li>
        <li><a href="#yêu-cầu-của-hàm">Yêu cầu của Hàm</a></li>
      </ul>
    </li>
    <li><a href="#bài-tập-1-tạo-hàm-lambda">Bài tập 1: Tạo Hàm Lambda</a>
      <ul>
        <li><a href="#bước-1-truy-cập-lambda-console">Bước 1: Truy cập Lambda Console</a></li>
        <li><a href="#bước-2-cấu-hình-cài-đặt-cơ-bản">Bước 2: Cấu hình Cài đặt Cơ bản</a></li>
        <li><a href="#bước-3-cấu-hình-cài-đặt-hàm">Bước 3: Cấu hình Cài đặt Hàm</a></li>
      </ul>
    </li>
    <li><a href="#bài-tập-2-thêm-mã-xử-lý-stream">Bài tập 2: Thêm Mã Xử Lý Stream</a>
      <ul>
        <li><a href="#bước-1-thay-thế-mã-hàm">Bước 1: Thay thế Mã Hàm</a></li>
        <li><a href="#bước-2-kiểm-tra-cú-pháp-hàm">Bước 2: Kiểm tra Cú pháp Hàm</a></li>
      </ul>
    </li>
    <li><a href="#bài-tập-3-cấu-hình-kích-hoạt-nguồn-sự-kiện">Bài tập 3: Cấu hình Kích hoạt Nguồn Sự kiện</a>
      <ul>
        <li><a href="#bước-1-thêm-kích-hoạt-dynamodb">Bước 1: Thêm Kích hoạt DynamoDB</a></li>
        <li><a href="#bước-2-xác-minh-cấu-hình-nguồn-sự-kiện">Bước 2: Xác minh Cấu hình Nguồn Sự kiện</a></li>
        <li><a href="#bước-3-cấu-hình-quyền-iam">Bước 3: Cấu hình Quyền IAM</a></li>
      </ul>
    </li>
    <li><a href="#bài-tập-4-kiểm-tra-xử-lý-stream">Bài tập 4: Kiểm tra Xử Lý Stream</a>
      <ul>
        <li><a href="#bước-1-tạo-mục-kiểm-tra">Bước 1: Tạo Mục Kiểm tra</a></li>
        <li><a href="#bước-2-giám-sát-thực-thi-lambda">Bước 2: Giám sát Thực thi Lambda</a></li>
        <li><a href="#bước-3-kiểm-tra-nhật-ký-xử-lý">Bước 3: Kiểm tra Nhật ký Xử lý</a></li>
      </ul>
    </li>
    <li><a href="#bài-tập-5-cấu-hình-nâng-cao">Bài tập 5: Cấu hình Nâng cao</a>
      <ul>
        <li><a href="#cấu-hình-xử-lý-lỗi">Cấu hình Xử lý Lỗi</a></li>
        <li><a href="#tối-ưu-hóa-hiệu-suất">Tối ưu hóa Hiệu suất</a></li>
        <li><a href="#giám-sát-và-cảnh-báo">Giám sát và Cảnh báo</a></li>
      </ul>
    </li>
    <li><a href="#mẫu-kiểm-tra-hàm">Mẫu Kiểm tra Hàm</a>
      <ul>
        <li><a href="#kiểm-tra-các-loại-sự-kiện-khác-nhau">Kiểm tra Các Loại Sự kiện Khác nhau</a></li>
        <li><a href="#danh-sách-kiểm-tra-xác-thực">Danh sách Kiểm tra Xác thực</a></li>
      </ul>
    </li>
    <li><a href="#khắc-phục-sự-cố-các-vấn-đề-thường-gặp">Khắc phục sự cố Các Vấn đề Thường gặp</a>
      <ul>
        <li><a href="#lambda-không-kích-hoạt">Lambda Không Kích hoạt</a></li>
        <li><a href="#lỗi-xử-lý">Lỗi Xử lý</a></li>
        <li><a href="#vấn-đề-hiệu-suất">Vấn đề Hiệu suất</a></li>
      </ul>
    </li>
    <li><a href="#next-steps">Next Steps</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              4.2 Lambda Function Setup
            </h1>
          

        



	<h2 id="tạo-lambda-xử-lý-stream">Tạo Lambda Xử Lý Stream</h2>
<p>⚙️ <strong>Xây dựng hàm Lambda để xử lý các sự kiện stream DynamoDB trong thời gian thực</strong></p>
<h3 id="tổng-quan">Tổng quan</h3>
<p>AWS Lambda cung cấp khả năng tính toán serverless để xử lý các sự kiện stream DynamoDB. Hàm của bạn sẽ tự động kích hoạt khi các mục trong bảng thay đổi, cho phép các mẫu xử lý thời gian thực.</p>
<h3 id="yêu-cầu-của-hàm">Yêu cầu của Hàm</h3>
<p><strong>Cấu hình Tối ưu Free Tier</strong>:</p>
<ul>
<li><strong>Runtime</strong>: Python 3.9 (đáng tin cậy và được hỗ trợ tốt)</li>
<li><strong>Memory</strong>: 128 MB (tối thiểu cho Free Tier)</li>
<li><strong>Timeout</strong>: 30 giây (đủ cho xử lý stream)</li>
<li><strong>Concurrent executions</strong>: 10 (an toàn trong Free Tier)</li>
</ul>
<h2 id="bài-tập-1-tạo-hàm-lambda">Bài tập 1: Tạo Hàm Lambda</h2>
<h3 id="bước-1-truy-cập-lambda-console">Bước 1: Truy cập Lambda Console</h3>
<p><strong>Điều hướng đến dịch vụ Lambda</strong>:</p>
<ol>
<li><strong>AWS Console</strong>: Tìm kiếm &ldquo;Lambda&rdquo;</li>
<li><strong>Functions</strong>: Nhấp vào &ldquo;Functions&rdquo; trong thanh bên trái</li>
<li><strong>Create function</strong>: Nhấp vào nút &ldquo;Create function&rdquo;</li>
<li><strong>Author from scratch</strong>: Chọn tùy chọn này</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.1.png?featherlight=false&amp;width=90pc" alt="4.2.1"></p>
<h3 id="bước-2-cấu-hình-cài-đặt-cơ-bản">Bước 2: Cấu hình Cài đặt Cơ bản</h3>
<p><strong>Cấu hình hàm</strong>:</p>
<ol>
<li><strong>Function name</strong>: <code>demo-dynamodb-stream-processor</code></li>
<li><strong>Runtime</strong>: Chọn &ldquo;Python 3.9&rdquo;</li>
<li><strong>Architecture</strong>: Để mặc định là &ldquo;x86_64&rdquo;</li>
<li><strong>Permissions</strong>: &ldquo;Create a new role with basic Lambda permissions&rdquo;</li>
<li><strong>Create function</strong>: Nhấp để tiếp tục</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.2.png?featherlight=false&amp;width=90pc" alt="4.2.2"></p>
<h3 id="bước-3-cấu-hình-cài-đặt-hàm">Bước 3: Cấu hình Cài đặt Hàm</h3>
<p><strong>Tối ưu hóa cho Free Tier</strong>:</p>
<ol>
<li><strong>Configuration tab</strong>: Nhấp sau khi tạo hàm</li>
<li><strong>General configuration</strong>: Nhấp vào &ldquo;Edit&rdquo;</li>
<li><strong>Memory</strong>: Đặt thành 128 MB</li>
<li><strong>Timeout</strong>: Đặt thành 30 giây</li>
<li><strong>Save</strong>: Nhấp để áp dụng thay đổi</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.3.png?featherlight=false&amp;width=90pc" alt="4.2.3"></p>
<h2 id="bài-tập-2-thêm-mã-xử-lý-stream">Bài tập 2: Thêm Mã Xử Lý Stream</h2>
<h3 id="bước-1-thay-thế-mã-hàm">Bước 1: Thay thế Mã Hàm</h3>
<p><strong>Điều hướng đến trình chỉnh sửa mã</strong>:</p>
<ol>
<li><strong>Code tab</strong>: Nhấp để mở trình chỉnh sửa mã</li>
<li><strong>lambda_function.py</strong>: Thay thế mã hiện có bằng:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> json
<span style="color:#f92672">import</span> boto3
<span style="color:#f92672">import</span> logging
<span style="color:#f92672">from</span> datetime <span style="color:#f92672">import</span> datetime

<span style="color:#75715e"># Cấu hình logging</span>
logger <span style="color:#f92672">=</span> logging<span style="color:#f92672">.</span>getLogger()
logger<span style="color:#f92672">.</span>setLevel(logging<span style="color:#f92672">.</span>INFO)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">lambda_handler</span>(event, context):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Xử lý các sự kiện Stream DynamoDB
</span><span style="color:#e6db74">    Tối ưu hóa cho AWS Free Tier
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">try</span>:
        processed_records <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
        
        <span style="color:#75715e"># Xử lý từng bản ghi trong batch</span>
        <span style="color:#66d9ef">for</span> record <span style="color:#f92672">in</span> event[<span style="color:#e6db74">&#39;Records&#39;</span>]:
            event_name <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;eventName&#39;</span>]
            
            <span style="color:#75715e"># Xử lý các sự kiện INSERT, MODIFY, REMOVE</span>
            <span style="color:#66d9ef">if</span> event_name <span style="color:#f92672">in</span> [<span style="color:#e6db74">&#39;INSERT&#39;</span>, <span style="color:#e6db74">&#39;MODIFY&#39;</span>, <span style="color:#e6db74">&#39;REMOVE&#39;</span>]:
                process_stream_record(record)
                processed_records <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
        
        <span style="color:#75715e"># Trả về phản hồi thành công</span>
        <span style="color:#66d9ef">return</span> {
            <span style="color:#e6db74">&#39;statusCode&#39;</span>: <span style="color:#ae81ff">200</span>,
            <span style="color:#e6db74">&#39;body&#39;</span>: json<span style="color:#f92672">.</span>dumps({
                <span style="color:#e6db74">&#39;message&#39;</span>: <span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;Successfully processed </span><span style="color:#e6db74">{</span>processed_records<span style="color:#e6db74">}</span><span style="color:#e6db74"> records&#39;</span>,
                <span style="color:#e6db74">&#39;timestamp&#39;</span>: datetime<span style="color:#f92672">.</span>utcnow()<span style="color:#f92672">.</span>isoformat(),
                <span style="color:#e6db74">&#39;processed_count&#39;</span>: processed_records
            })
        }
        
    <span style="color:#66d9ef">except</span> <span style="color:#a6e22e">Exception</span> <span style="color:#66d9ef">as</span> e:
        logger<span style="color:#f92672">.</span>error(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Error processing stream records: </span><span style="color:#e6db74">{</span>str(e)<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#75715e"># Ném lại lỗi để Lambda retry</span>
        <span style="color:#66d9ef">raise</span> e

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">process_stream_record</span>(record):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Xử lý từng bản ghi stream
</span><span style="color:#e6db74">    Thêm logic nghiệp vụ của bạn tại đây
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    event_name <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;eventName&#39;</span>]
    
    <span style="color:#75715e"># Trích xuất thông tin chính</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;dynamodb&#39;</span> <span style="color:#f92672">in</span> record:
        keys <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;dynamodb&#39;</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;Keys&#39;</span>, {})
        pk <span style="color:#f92672">=</span> keys<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;PK&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;S&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
        sk <span style="color:#f92672">=</span> keys<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;SK&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;S&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
        
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Processing </span><span style="color:#e6db74">{</span>event_name<span style="color:#e6db74">}</span><span style="color:#e6db74"> for item: </span><span style="color:#e6db74">{</span>pk<span style="color:#e6db74">}</span><span style="color:#e6db74">#</span><span style="color:#e6db74">{</span>sk<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
        
        <span style="color:#75715e"># Xử lý các loại sự kiện khác nhau</span>
        <span style="color:#66d9ef">if</span> event_name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;INSERT&#39;</span>:
            handle_insert_event(record)
        <span style="color:#66d9ef">elif</span> event_name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;MODIFY&#39;</span>:
            handle_modify_event(record)
        <span style="color:#66d9ef">elif</span> event_name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;REMOVE&#39;</span>:
            handle_remove_event(record)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_insert_event</span>(record):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Xử lý việc tạo mục mới
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;Processing INSERT event&#34;</span>)
    
    <span style="color:#75715e"># Lấy dữ liệu mục mới</span>
    new_image <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;dynamodb&#39;</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;NewImage&#39;</span>, {})
    
    <span style="color:#75715e"># Ví dụ: Gửi thông báo cho người dùng mới</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;USER#&#39;</span> <span style="color:#f92672">in</span> str(new_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;PK&#39;</span>, {})):
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;New user created - could send welcome email&#34;</span>)
    
    <span style="color:#75715e"># Ví dụ: Cập nhật kho cho sản phẩm mới</span>
    <span style="color:#66d9ef">elif</span> <span style="color:#e6db74">&#39;PRODUCT#&#39;</span> <span style="color:#f92672">in</span> str(new_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;PK&#39;</span>, {})):
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;New product created - could update search index&#34;</span>)
    
    <span style="color:#75715e"># Ví dụ: Xử lý đơn hàng mới</span>
    <span style="color:#66d9ef">elif</span> <span style="color:#e6db74">&#39;ORDER#&#39;</span> <span style="color:#f92672">in</span> str(new_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;SK&#39;</span>, {})):
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;New order created - could trigger fulfillment&#34;</span>)

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_modify_event</span>(record):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Xử lý cập nhật mục
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;Processing MODIFY event&#34;</span>)
    
    <span style="color:#75715e"># Lấy hình ảnh trước và sau</span>
    old_image <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;dynamodb&#39;</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;OldImage&#39;</span>, {})
    new_image <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;dynamodb&#39;</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;NewImage&#39;</span>, {})
    
    <span style="color:#75715e"># Ví dụ: Kiểm tra thay đổi trạng thái</span>
    old_status <span style="color:#f92672">=</span> old_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;status&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;S&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
    new_status <span style="color:#f92672">=</span> new_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;status&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;S&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)
    
    <span style="color:#66d9ef">if</span> old_status <span style="color:#f92672">!=</span> new_status:
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Status changed from </span><span style="color:#e6db74">{</span>old_status<span style="color:#e6db74">}</span><span style="color:#e6db74"> to </span><span style="color:#e6db74">{</span>new_status<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#75715e"># Có thể kích hoạt thông báo, cập nhật bộ nhớ đệm, v.v.</span>
    
    <span style="color:#75715e"># Ví dụ: Phát hiện thay đổi giá</span>
    old_price <span style="color:#f92672">=</span> old_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;price&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;0&#39;</span>)
    new_price <span style="color:#f92672">=</span> new_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;price&#39;</span>, {})<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;N&#39;</span>, <span style="color:#e6db74">&#39;0&#39;</span>)
    
    <span style="color:#66d9ef">if</span> old_price <span style="color:#f92672">!=</span> new_price:
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Price changed from </span><span style="color:#e6db74">{</span>old_price<span style="color:#e6db74">}</span><span style="color:#e6db74"> to </span><span style="color:#e6db74">{</span>new_price<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#75715e"># Có thể làm mới bộ nhớ đệm, cập nhật gợi ý, v.v.</span>

<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">handle_remove_event</span>(record):
    <span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">    Xử lý xóa mục
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;Processing REMOVE event&#34;</span>)
    
    <span style="color:#75715e"># Lấy dữ liệu mục đã xóa</span>
    old_image <span style="color:#f92672">=</span> record[<span style="color:#e6db74">&#39;dynamodb&#39;</span>]<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;OldImage&#39;</span>, {})
    
    <span style="color:#75715e"># Ví dụ: Dọn dẹp dữ liệu liên quan</span>
    <span style="color:#66d9ef">if</span> <span style="color:#e6db74">&#39;USER#&#39;</span> <span style="color:#f92672">in</span> str(old_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;PK&#39;</span>, {})):
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;User deleted - could cleanup user data&#34;</span>)
    
    <span style="color:#75715e"># Ví dụ: Xóa khỏi chỉ mục tìm kiếm</span>
    <span style="color:#66d9ef">elif</span> <span style="color:#e6db74">&#39;PRODUCT#&#39;</span> <span style="color:#f92672">in</span> str(old_image<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;PK&#39;</span>, {})):
        logger<span style="color:#f92672">.</span>info(<span style="color:#e6db74">&#34;Product deleted - could remove from search&#34;</span>)
</code></pre></div><ol start="2">
<li><strong>Deploy</strong>: Nhấp vào &ldquo;Deploy&rdquo; để lưu mã</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.4.png?featherlight=false&amp;width=90pc" alt="4.2.4"></p>
<h3 id="bước-2-kiểm-tra-cú-pháp-hàm">Bước 2: Kiểm tra Cú pháp Hàm</h3>
<p><strong>Xác thực mã</strong>:</p>
<ol>
<li><strong>Test tab</strong>: Nhấp vào &ldquo;Test&rdquo; tab</li>
<li><strong>Create test event</strong>: Nhấp vào &ldquo;Create new event&rdquo;</li>
<li><strong>Event template</strong>: Chọn mẫu &ldquo;DynamoDB Update&rdquo;</li>
<li><strong>Event name</strong>: <code>test-stream-event</code></li>
<li><strong>Test</strong>: Nhấp vào &ldquo;Test&rdquo; để xác thực cú pháp</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.5.png?featherlight=false&amp;width=90pc" alt="4.2.5"></p>
<h2 id="bài-tập-3-cấu-hình-kích-hoạt-nguồn-sự-kiện">Bài tập 3: Cấu hình Kích hoạt Nguồn Sự kiện</h2>
<h3 id="bước-1-thêm-kích-hoạt-dynamodb">Bước 1: Thêm Kích hoạt DynamoDB</h3>
<p><strong>Kết nối Lambda với Stream DynamoDB</strong>:</p>
<ol>
<li><strong>Function overview</strong>: Trong Lambda console</li>
<li><strong>Add trigger</strong>: Nhấp vào nút &ldquo;Add trigger&rdquo;</li>
<li><strong>Trigger configuration</strong>:
<ul>
<li><strong>Source</strong>: Chọn &ldquo;DynamoDB&rdquo;</li>
<li><strong>DynamoDB table</strong>: Chọn <code>demo-ecommerce-freetier</code></li>
<li><strong>Batch size</strong>: Đặt thành 10 (tối ưu Free Tier)</li>
<li><strong>Starting position</strong>: Chọn &ldquo;Trim horizon&rdquo;</li>
</ul>
</li>
<li><strong>Add</strong>: Nhấp để tạo kích hoạt</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.6.png?featherlight=false&amp;width=90pc" alt="4.2.6"></p>
<h3 id="bước-2-xác-minh-cấu-hình-nguồn-sự-kiện">Bước 2: Xác minh Cấu hình Nguồn Sự kiện</h3>
<p><strong>Kiểm tra cấu hình kích hoạt</strong>:</p>
<ol>
<li><strong>Function overview</strong>: Nên hiển thị kích hoạt DynamoDB</li>
<li><strong>Configuration</strong>: Xác minh cài đặt:
<ul>
<li><strong>Batch size</strong>: 10 bản ghi</li>
<li><strong>Starting position</strong>: Trim horizon</li>
<li><strong>Status</strong>: Enabled</li>
<li><strong>State</strong>: Creating → Enabled</li>
</ul>
</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.7.png?featherlight=false&amp;width=90pc" alt="4.2.7"></p>
<h3 id="bước-3-cấu-hình-quyền-iam">Bước 3: Cấu hình Quyền IAM</h3>
<p><strong>Cập nhật vai trò thực thi Lambda</strong>:</p>
<ol>
<li><strong>Configuration tab</strong>: Nhấp vào &ldquo;Permissions&rdquo;</li>
<li><strong>Execution role</strong>: Nhấp vào liên kết tên vai trò</li>
<li><strong>IAM console</strong>: Mở trong tab mới</li>
<li><strong>Attach policies</strong>: Thêm <code>AWSLambdaDynamoDBExecutionRole</code></li>
<li><strong>Save</strong>: Quay lại Lambda console</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.8.png?featherlight=false&amp;width=90pc" alt="4.2.8"></p>
<h2 id="bài-tập-4-kiểm-tra-xử-lý-stream">Bài tập 4: Kiểm tra Xử Lý Stream</h2>
<h3 id="bước-1-tạo-mục-kiểm-tra">Bước 1: Tạo Mục Kiểm tra</h3>
<p><strong>Tạo sự kiện stream</strong>:</p>
<ol>
<li><strong>DynamoDB console</strong>: Mở trong tab mới</li>
<li><strong>Items tab</strong>: Điều hướng đến bảng của bạn</li>
<li><strong>Create item</strong>: Thêm dữ liệu kiểm tra:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;PK&#34;</span>: <span style="color:#e6db74">&#34;LAMBDA#test-processing&#34;</span>,
  <span style="color:#f92672">&#34;SK&#34;</span>: <span style="color:#e6db74">&#34;EVENT#001&#34;</span>,
  <span style="color:#f92672">&#34;event_type&#34;</span>: <span style="color:#e6db74">&#34;lambda_test&#34;</span>,
  <span style="color:#f92672">&#34;description&#34;</span>: <span style="color:#e6db74">&#34;Testing Lambda stream processing&#34;</span>,
  <span style="color:#f92672">&#34;created_at&#34;</span>: <span style="color:#e6db74">&#34;2025-08-11T16:30:00Z&#34;</span>,
  <span style="color:#f92672">&#34;test_purpose&#34;</span>: <span style="color:#e6db74">&#34;verify_lambda_trigger&#34;</span>
}
</code></pre></div><ol start="4">
<li><strong>Create</strong>: Lưu mục</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.9.png?featherlight=false&amp;width=90pc" alt="4.2.9"></p>
<h3 id="bước-2-giám-sát-thực-thi-lambda">Bước 2: Giám sát Thực thi Lambda</h3>
<p><strong>Kiểm tra việc gọi hàm</strong>:</p>
<ol>
<li><strong>Lambda console</strong>: Quay lại hàm của bạn</li>
<li><strong>Monitor tab</strong>: Nhấp để xem các chỉ số</li>
<li><strong>Invocations</strong>: Nên hiển thị 1 lần gọi mới</li>
<li><strong>Duration</strong>: Thường &lt; 1 giây</li>
<li><strong>Errors</strong>: Nên là 0</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.10.png?featherlight=false&amp;width=90pc" alt="4.2.10"></p>
<h3 id="bước-3-kiểm-tra-nhật-ký-xử-lý">Bước 3: Kiểm tra Nhật ký Xử lý</h3>
<p><strong>Xem nhật ký chi tiết</strong>:</p>
<ol>
<li><strong>CloudWatch logs</strong>: Nhấp vào &ldquo;View CloudWatch logs&rdquo;</li>
<li><strong>Log stream</strong>: Nhấp vào luồng nhật ký mới nhất</li>
<li><strong>Log entries</strong>: Tìm kiếm:
<ul>
<li>START RequestId: [uuid]</li>
<li>Processing INSERT for item: LAMBDA#test-processing#EVENT#001</li>
<li>Processing INSERT event</li>
<li>Successfully processed 1 records</li>
<li>END RequestId: [uuid]</li>
</ul>
</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.11.png?featherlight=false&amp;width=90pc" alt="4.2.11"></p>
<h2 id="bài-tập-5-cấu-hình-nâng-cao">Bài tập 5: Cấu hình Nâng cao</h2>
<h3 id="cấu-hình-xử-lý-lỗi">Cấu hình Xử lý Lỗi</h3>
<p><strong>Cấu hình retry và xử lý lỗi</strong>:</p>
<ol>
<li><strong>Event source mapping</strong>: Chỉnh sửa kích hoạt DynamoDB của bạn</li>
<li><strong>Additional settings</strong>:
<ul>
<li><strong>Retry attempts</strong>: 3 (mặc định)</li>
<li><strong>Maximum record age</strong>: 3600 giây</li>
<li><strong>Split batch on error</strong>: Bật</li>
<li><strong>Dead letter queue</strong>: Cấu hình SNS/SQS (tùy chọn)</li>
</ul>
</li>
</ol>
<h3 id="tối-ưu-hóa-hiệu-suất">Tối ưu hóa Hiệu suất</h3>
<p><strong>Cài đặt tối ưu Free Tier</strong>:</p>
<ul>
<li><strong>Parallelization factor</strong>: 1 (tránh đồng thời quá mức)</li>
<li><strong>Batch size</strong>: 10 bản ghi (cân bằng độ trễ và chi phí)</li>
<li><strong>Reserved concurrency</strong>: 10 (kiểm soát chi phí)</li>
<li><strong>Provisioned concurrency</strong>: 0 (không cần cho streams)</li>
</ul>
<h3 id="giám-sát-và-cảnh-báo">Giám sát và Cảnh báo</h3>
<p><strong>Thiết lập giám sát cơ bản</strong>:</p>
<ol>
<li><strong>CloudWatch Alarms</strong>: Tạo cho:
<ul>
<li>Lỗi hàm &gt; 0</li>
<li>Thời gian thực thi hàm &gt; 20 giây</li>
<li>Tuổi iterator &gt; 30 giây</li>
</ul>
</li>
<li><strong>Notifications</strong>: Chủ đề SNS cho cảnh báo</li>
<li><strong>Dashboard</strong>: Thêm các chỉ số vào bảng điều khiển CloudWatch</li>
</ol>
<p><img src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/images/4/4.2.12.png?featherlight=false&amp;width=90pc" alt="4.2.12"></p>
<h2 id="mẫu-kiểm-tra-hàm">Mẫu Kiểm tra Hàm</h2>
<h3 id="kiểm-tra-các-loại-sự-kiện-khác-nhau">Kiểm tra Các Loại Sự kiện Khác nhau</h3>
<p><strong>Kiểm tra toàn diện</strong>:</p>
<ol>
<li><strong>INSERT</strong>: Tạo mục mới</li>
<li><strong>MODIFY</strong>: Cập nhật mục hiện có</li>
<li><strong>REMOVE</strong>: Xóa mục</li>
<li><strong>Batch</strong>: Nhiều thay đổi nhanh chóng</li>
</ol>
<h3 id="danh-sách-kiểm-tra-xác-thực">Danh sách Kiểm tra Xác thực</h3>
<p><strong>Xác minh cài đặt của bạn</strong>:</p>
<ul>
<li>✅ <strong>Hàm Lambda đã được tạo</strong> với runtime chính xác</li>
<li>✅ <strong>Kích hoạt stream đã được cấu hình</strong> với quyền truy cập thích hợp</li>
<li>✅ <strong>Mã đã được triển khai</strong> và cú pháp đã được xác thực</li>
<li>✅ <strong>Kiểm tra thành công</strong> với dữ liệu mẫu</li>
<li>✅ <strong>Nhật ký hiển thị</strong> chi tiết xử lý</li>
<li>✅ <strong>Chỉ số cho thấy</strong> thực thi khỏe mạnh</li>
</ul>
<h2 id="khắc-phục-sự-cố-các-vấn-đề-thường-gặp">Khắc phục sự cố Các Vấn đề Thường gặp</h2>
<h3 id="lambda-không-kích-hoạt">Lambda Không Kích hoạt</h3>
<p><strong>Kiểm tra các mục sau</strong>:</p>
<ol>
<li><strong>Stream enabled</strong>: DynamoDB stream đang hoạt động</li>
<li><strong>Permissions</strong>: Lambda có quyền đọc stream</li>
<li><strong>Event source mapping</strong>: Kích hoạt đang được bật</li>
<li><strong>Function state</strong>: Lambda đang hoạt động (không bị lỗi)</li>
</ol>
<h3 id="lỗi-xử-lý">Lỗi Xử lý</h3>
<p><strong>Các bước gỡ lỗi</strong>:</p>
<ol>
<li><strong>CloudWatch logs</strong>: Kiểm tra các thông báo lỗi</li>
<li><strong>Timeout issues</strong>: Tăng thời gian chờ nếu cần</li>
<li><strong>Memory errors</strong>: Giám sát mức sử dụng bộ nhớ</li>
<li><strong>Permissions</strong>: Xác minh tất cả các quyền cần thiết</li>
</ol>
<h3 id="vấn-đề-hiệu-suất">Vấn đề Hiệu suất</h3>
<p><strong>Mẹo tối ưu hóa</strong>:</p>
<ol>
<li><strong>Batch size</strong>: Điều chỉnh dựa trên thời gian xử lý</li>
<li><strong>Memory allocation</strong>: Định kích thước phù hợp cho tải công việc của bạn</li>
<li><strong>Cold starts</strong>: Cân nhắc sử dụng provisioned concurrency nếu cần</li>
<li><strong>Error handling</strong>: Triển khai logic thử lại thích hợp</li>
</ol>

<div class="notices success" ><p><strong>Lambda Ready</strong>: Function của bạn bây giờ processing DynamoDB stream events trong real-time!</p>
</div>

<h2 id="next-steps">Next Steps</h2>
<p>Với Lambda function của bạn processing stream events, bạn ready để practice với real data changes và explore different event-driven patterns. Next section covers hands-on stream processing exercises.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/4-streams-lambda-processing/4.1-stream-configuration/" title="4.1 Stream Configuration"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/vi/5-monitoring-optimization/" title="5. Giám Sát &amp; Tối Ưu Hóa" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/clipboard.min.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/perfect-scrollbar.min.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/perfect-scrollbar.jquery.min.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/jquery.sticky.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/featherlight.min.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/highlight.pack.js?1755112296"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/modernizr.custom-3.6.0.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/learn.js?1755112296"></script>
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/js/hugo-learn.js?1755112296"></script>

    <link href="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/mermaid/mermaid.css?1755112296" rel="stylesheet" />
    <script src="/DynamoDB-Advanced-Patterns-and-Global-Tables-Streams/mermaid/mermaid.js?1755112296"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
